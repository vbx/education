<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Anglais - 3e personne</title>
    <style>
      :root {
        --bg: #0f1115;
        --ink: #e8e6e3;
        --muted: #b7b3ad;
        --accent: #8ab4f8;
        --card: #171a21;
        --border: #2a2f3a;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: "IBM Plex Serif", "Georgia", serif;
        background: var(--bg);
        color: var(--ink);
        padding: 32px;
      }
      a { color: var(--accent); }
      header { max-width: 820px; margin: 0 auto 20px; }
      h1 { margin: 0 0 6px; font-size: 2rem; }
      p { margin: 0; color: var(--muted); }
      main { max-width: 820px; margin: 0 auto; }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        padding: 18px;
        margin-bottom: 16px;
      }
      label { display: block; margin-bottom: 6px; }
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border);
        background: #121419;
        color: var(--ink);
      }
      .feedback { color: var(--muted); margin-top: 8px; }
      .feedback.good { color: #8bd99f; }
      .feedback.bad { color: #f28b82; }
      button {
        padding: 10px 14px;
        font-size: 1rem;
        border: 1px solid var(--border);
        background: #121419;
        color: var(--ink);
        cursor: pointer;
      }
      button:hover { border-color: var(--accent); }
      .result { font-weight: bold; color: var(--muted); margin-top: 10px; }
      .actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
      .series { color: var(--muted); font-size: 0.9rem; }
    </style>
  </head>
  <body>
    <header>
      <p><a href="intro.html">Retour Anglais</a></p>
      <h1>&#9998; Presenter quelqu'un a la 3e personne</h1>
      <p>Choisis la phrase correcte pour presenter la personne.</p>
    </header>
    <main>
      <div class="card">
        <label id="q1-label" for="q1"></label>
        <select id="q1"></select>
      </div>
      <div class="card">
        <label id="q2-label" for="q2"></label>
        <select id="q2"></select>
      </div>
      <div class="card">
        <label id="q3-label" for="q3"></label>
        <select id="q3"></select>
      </div>
      <div class="card">
        <label id="q4-label" for="q4"></label>
        <select id="q4"></select>
      </div>
      <div class="actions">
        <button id="check">Verifier</button>
        <button id="next">Autre serie</button>
        <span class="series" id="series"></span>
      </div>
      <p class="result" id="result" aria-live="polite"></p>
    </main>
    <script>
      const sets = [
        [
          {
            label: "Name: Liam",
            options: ["He is Liam", "He are Liam", "She is Liam", "They is Liam"],
            answer: "He is Liam",
            explain: "Utilise He + is pour presenter un garcon a la 3e personne.",
          },
          {
            label: "Nationality: Irish",
            options: ["He is Irish", "He are Irish", "She is Irish", "It are Irish"],
            answer: "He is Irish",
            explain: "On utilise He + is pour la nationalite au singulier.",
          },
          {
            label: "City: Sydney (girl)",
            options: ["She is from Sydney", "She are from Sydney", "He is from Sydney", "She from Sydney"],
            answer: "She is from Sydney",
            explain: "She + is from pour l'origine d'une fille.",
          },
          {
            label: "Age: 16 (girl)",
            options: ["She is sixteen years old", "She is sixteen year old", "He is sixteen years old", "She are sixteen years old"],
            answer: "She is sixteen years old",
            explain: "Forme correcte: She is + age + years old.",
          },
        ],
        [
          {
            label: "Name: Rebecca",
            options: ["She is Rebecca", "She are Rebecca", "He is Rebecca", "It are Rebecca"],
            answer: "She is Rebecca",
            explain: "Utilise She + is pour presenter une fille a la 3e personne.",
          },
          {
            label: "Nationality: Australian",
            options: ["She is Australian", "She are Australian", "He is Australian", "They is Australian"],
            answer: "She is Australian",
            explain: "Nationalite au singulier: She + is.",
          },
          {
            label: "City: Toronto (girl)",
            options: ["She is from Toronto", "She are from Toronto", "He is from Toronto", "She from Toronto"],
            answer: "She is from Toronto",
            explain: "Origine: She is from + ville.",
          },
          {
            label: "Age: 18 (girl)",
            options: ["She is eighteen years old", "She is eighteen year old", "He is eighteen years old", "She are eighteen years old"],
            answer: "She is eighteen years old",
            explain: "Age: She is + number + years old.",
          },
        ],
        [
          {
            label: "Name: Jake",
            options: ["He is Jake", "He are Jake", "She is Jake", "They is Jake"],
            answer: "He is Jake",
            explain: "He + is pour presenter un garcon.",
          },
          {
            label: "Nationality: Canadian",
            options: ["He is Canadian", "He are Canadian", "She is Canadian", "It are Canadian"],
            answer: "He is Canadian",
            explain: "Nationalite au singulier: He + is.",
          },
          {
            label: "City: Dublin (boy)",
            options: ["He is from Dublin", "He are from Dublin", "She is from Dublin", "He from Dublin"],
            answer: "He is from Dublin",
            explain: "Origine: He is from + ville.",
          },
          {
            label: "Age: 20 (boy)",
            options: ["He is twenty years old", "He is twenty year old", "She is twenty years old", "He are twenty years old"],
            answer: "He is twenty years old",
            explain: "Age: He is + number + years old.",
          },
        ],
      ];

      const button = document.getElementById("check");
      const result = document.getElementById("result");
      const next = document.getElementById("next");
      const series = document.getElementById("series");
      const labels = [
        document.getElementById("q1-label"),
        document.getElementById("q2-label"),
        document.getElementById("q3-label"),
        document.getElementById("q4-label"),
      ];
      const selects = [
        document.getElementById("q1"),
        document.getElementById("q2"),
        document.getElementById("q3"),
        document.getElementById("q4"),
      ];
      let current = Math.floor(Math.random() * sets.length);

      const shuffle = (items) => {
        const copy = items.slice();
        for (let i = copy.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy;
      };

      const renderSet = (index) => {
        result.textContent = "";
        series.textContent = `Serie ${index + 1}/3`;
        sets[index].forEach((item, i) => {
          labels[i].textContent = item.label;
          selects[i].dataset.answer = item.answer;
          selects[i].dataset.explain = item.explain;
          selects[i].innerHTML = "";
          const placeholder = document.createElement("option");
          placeholder.value = "";
          placeholder.textContent = "-- Choisir --";
          selects[i].appendChild(placeholder);
          shuffle(item.options).forEach((opt) => {
            const option = document.createElement("option");
            option.textContent = opt;
            selects[i].appendChild(option);
          });
          const feedback = selects[i].parentElement.querySelector(".feedback");
          if (feedback) {
            feedback.textContent = "";
            feedback.classList.remove("good", "bad");
          }
        });
      };

      renderSet(current);

      button.addEventListener("click", () => {
        let score = 0;
        selects.forEach((select) => {
          let feedback = select.parentElement.querySelector(".feedback");
          if (!feedback) {
            feedback = document.createElement("p");
            feedback.className = "feedback";
            select.parentElement.appendChild(feedback);
          }
          if (!select.value) {
            feedback.textContent = "Choisis une reponse.";
            feedback.classList.remove("good", "bad");
            return;
          }
          if (select.value === select.dataset.answer) {
            feedback.textContent = "Correct.";
            feedback.classList.remove("bad");
            feedback.classList.add("good");
            score += 1;
          } else {
            feedback.textContent = `Faux: ${select.dataset.explain}`;
            feedback.classList.remove("good");
            feedback.classList.add("bad");
          }
        });
        result.textContent = `Score: ${score}/${selects.length}`;
      });

      next.addEventListener("click", () => {
        let index = current;
        while (index === current && sets.length > 1) {
          index = Math.floor(Math.random() * sets.length);
        }
        current = index;
        renderSet(current);
      });
    </script>
  </body>
</html>
