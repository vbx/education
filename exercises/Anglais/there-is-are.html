<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Anglais - There is / There are</title>
    <style>
      :root {
        --bg: #0f1115;
        --ink: #e8e6e3;
        --muted: #b7b3ad;
        --accent: #8ab4f8;
        --card: #171a21;
        --border: #2a2f3a;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: "IBM Plex Serif", "Georgia", serif;
        background: var(--bg);
        color: var(--ink);
        padding: 32px;
      }
      a { color: var(--accent); }
      header { max-width: 820px; margin: 0 auto 20px; }
      h1 { margin: 0 0 6px; font-size: 2rem; }
      p { margin: 0; color: var(--muted); }
      main { max-width: 820px; margin: 0 auto; }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        padding: 18px;
        margin-bottom: 16px;
      }
      .row { display: grid; gap: 10px; margin-top: 10px; }
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border);
        background: #ffffff;
        color: #111111;
      }
      .feedback { color: var(--muted); margin-top: 8px; }
      .feedback.good { color: #8bd99f; }
      .feedback.bad { color: #f28b82; }
      button {
        padding: 10px 14px;
        font-size: 1rem;
        border: 1px solid var(--border);
        background: #ffffff;
        color: #111111;
        cursor: pointer;
      }
      button:hover { border-color: var(--accent); }
      .result { font-weight: bold; color: var(--muted); margin-top: 10px; }
      .actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
      .series { color: var(--muted); font-size: 0.9rem; }
    </style>
  </head>
  <body>
    <header>
      <p><a href="intro.html">Retour Anglais</a></p>
      <h1>&#9878; There is / There are (il y a)</h1>
      <p>Choisis la bonne forme pour parler de l'existence.</p>
    </header>
    <main>
      <div class="card">
        <label id="q1-label" for="q1"></label>
        <select id="q1"></select>
      </div>
      <div class="card">
        <label id="q2-label" for="q2"></label>
        <select id="q2"></select>
      </div>
      <div class="card">
        <label id="q3-label" for="q3"></label>
        <select id="q3"></select>
      </div>
      <div class="card">
        <label id="q4-label" for="q4"></label>
        <select id="q4"></select>
      </div>
      <div class="card">
        <label id="q5-label" for="q5"></label>
        <select id="q5"></select>
      </div>
      <div class="actions">
        <button id="check">Verifier</button>
        <button id="next">Autre serie</button>
        <span class="series" id="series"></span>
      </div>
      <p class="result" id="result" aria-live="polite"></p>
    </main>
    <script>
      const baseOptions = ["There is", "There are", "There isn't", "There aren't"];
      const sets = [
        [
          { label: "_____ a library in the school.", answer: "There is", explain: "Singulier: There is + nom au singulier." },
          { label: "_____ two science labs.", answer: "There are", explain: "Pluriel: There are + nom au pluriel." },
          { label: "_____ a stadium. (negative)", answer: "There isn't", explain: "Negatif singulier: There isn't." },
          { label: "_____ any toilets. (negative)", answer: "There aren't", explain: "Negatif pluriel: There aren't." },
          { label: "_____ a playground and a gym.", answer: "There are", explain: "Deux elements: forme plurielle There are." },
        ],
        [
          { label: "_____ a cafeteria in the school.", answer: "There is", explain: "Singulier: There is + nom au singulier." },
          { label: "_____ three classrooms.", answer: "There are", explain: "Pluriel: There are + nom au pluriel." },
          { label: "_____ a swimming pool. (negative)", answer: "There isn't", explain: "Negatif singulier: There isn't." },
          { label: "_____ any lockers. (negative)", answer: "There aren't", explain: "Negatif pluriel: There aren't." },
          { label: "_____ a library and an art room.", answer: "There are", explain: "Deux elements: forme plurielle There are." },
        ],
        [
          { label: "_____ a music room.", answer: "There is", explain: "Singulier: There is + nom au singulier." },
          { label: "_____ four science labs.", answer: "There are", explain: "Pluriel: There are + nom au pluriel." },
          { label: "_____ a car park. (negative)", answer: "There isn't", explain: "Negatif singulier: There isn't." },
          { label: "_____ any gyms. (negative)", answer: "There aren't", explain: "Negatif pluriel: There aren't." },
          { label: "_____ a hall and a main entrance.", answer: "There are", explain: "Deux elements: forme plurielle There are." },
        ],
      ];

      const button = document.getElementById("check");
      const result = document.getElementById("result");
      const next = document.getElementById("next");
      const series = document.getElementById("series");
      const labels = [
        document.getElementById("q1-label"),
        document.getElementById("q2-label"),
        document.getElementById("q3-label"),
        document.getElementById("q4-label"),
        document.getElementById("q5-label"),
      ];
      const selects = [
        document.getElementById("q1"),
        document.getElementById("q2"),
        document.getElementById("q3"),
        document.getElementById("q4"),
        document.getElementById("q5"),
      ];
      let current = Math.floor(Math.random() * sets.length);

      const shuffle = (items) => {
        const copy = items.slice();
        for (let i = copy.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy;
      };

      const renderSet = (index) => {
        result.textContent = "";
        series.textContent = `Serie ${index + 1}/3`;
        sets[index].forEach((item, i) => {
          labels[i].textContent = item.label;
          selects[i].dataset.answer = item.answer;
          selects[i].dataset.explain = item.explain;
          selects[i].innerHTML = "";
          const placeholder = document.createElement("option");
          placeholder.value = "";
          placeholder.textContent = "-- Choisir --";
          selects[i].appendChild(placeholder);
          shuffle(baseOptions).forEach((opt) => {
            const option = document.createElement("option");
            option.textContent = opt;
            selects[i].appendChild(option);
          });
          const feedback = selects[i].parentElement.querySelector(".feedback");
          if (feedback) {
            feedback.textContent = "";
            feedback.classList.remove("good", "bad");
          }
        });
      };

      renderSet(current);

      button.addEventListener("click", () => {
        let score = 0;
        selects.forEach((select) => {
          let feedback = select.parentElement.querySelector(".feedback");
          if (!feedback) {
            feedback = document.createElement("p");
            feedback.className = "feedback";
            select.parentElement.appendChild(feedback);
          }
          if (!select.value) {
            feedback.textContent = "Choisis une reponse.";
            feedback.classList.remove("good", "bad");
            return;
          }
          if (select.value === select.dataset.answer) {
            feedback.textContent = "Correct.";
            feedback.classList.remove("bad");
            feedback.classList.add("good");
            score += 1;
          } else {
            feedback.textContent = `Faux: ${select.dataset.explain}`;
            feedback.classList.remove("good");
            feedback.classList.add("bad");
          }
        });
        result.textContent = `Score: ${score}/${selects.length}`;
      });

      next.addEventListener("click", () => {
        let index = current;
        while (index === current && sets.length > 1) {
          index = Math.floor(Math.random() * sets.length);
        }
        current = index;
        renderSet(current);
      });
    </script>
  </body>
</html>
